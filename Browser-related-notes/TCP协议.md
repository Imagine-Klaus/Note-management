[TOC]
# 1.TCP特性

- TCP提供一种**面向连接**的,**可靠的**字节流服务
- 在一个TCP连接中,仅有两方进行通信
- TCP使用校验、确认和重传机制来保证可靠运输
- TCP给数据分节进行排序,并使用累计确认保证数据的不变和非重复
- TCP使用滑动窗口机制来实现流量控制,通过动态改变窗口的大小实现拥塞控制

> 注意:TCP不能保证数据一定会被对方接收到，TCP能做到的就是如果有可能，就把数据送到接受方，否则就通知用户

# 2.TCP连接的三次握手

## 2.1 什么是三次握手
所谓三次握手,就是建立一个TCP连接时,需要服务器和客户端总共发送三个包<br>

> 三次握手的目的：连接服务器的指定端口,建立TCP连接,并同步连接双方的确认号和确认号,并交换TCP窗口大小信息.在socket编程中,客户端执行`connect()`将触发三次握手


## 2.2 三次握手

- 第一次握手(SYN = 1 ,seq = x):
    + 客户端发送一个TCP的SYN标志位置1的包,指明客户端打算连接的服务器端口,以及序列号X,保存在包头的序列号seq(Sequence Number)中
> 发送完毕后,客户端进入SYN_SEND状态

- 第二次握手(SYN = 1,ACK = 1,seq = y,ACKnum = x + 1)
    + 服务器发回确认包(ACK)应答。即SYN和ACK标志位均为1.服务器端选择自己的ISN序列号，放到seq域里,同时将确认序列号设置为客户的ISN+1
> 发送完毕后,服务器进入SYN_RCVD状态

- 第三次握手(ACK=1,ACKnum = y + 1 )
    + 客户端再次发送确认包.即SYN标志位为0,ACK为1 ,并且把服务器发来的序列号字段+1,放在确认字段中发送给对方
>   发送完毕后,客户端进入ESTABISHED状态,当服务器端接收到了这个包的时候,也进入ESTABLISHED状态, 握手结束

![](../imgs/tcp-connection-made-three-way-handshake.png)